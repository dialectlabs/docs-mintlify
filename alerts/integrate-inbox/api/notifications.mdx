---
title: Notifications
description: Retrieve and manage user notification history, read states, and notification data via API for building custom inbox experiences
---

## Prerequisites

Before managing notifications, ensure you have:

- **App Registration**: Your app must be registered with Dialect ([registration guide](/alerts/setup/register-app))
- **User Authentication**: Users must be authenticated with JWT tokens ([authentication guide](/alerts/integrate-inbox/api/authentication))


## Best Practices

<CardGroup cols={3}>
<Card title="Performance" icon="gauge">
Use pagination (25-50 per page), cache data, and implement virtual scrolling for large lists.
</Card>

<Card title="User Experience" icon="heart">
Show unread counts, "mark all read" buttons, and relative timestamps with graceful empty states.
</Card>

<Card title="Real-time Updates" icon="rotate">
Poll summary endpoint periodically and update local state optimistically when marking as read.
</Card>
</CardGroup>

## Notification History

### Get Full Notification History

Retrieve paginated notification history for the authenticated user:

<CodeGroup>
```typescript TypeScript
const response = await fetch('https://alerts-api.dial.to/v2/history?limit=25', {
  headers: {
    'Authorization': `Bearer ${jwtToken}`,
    'X-Dialect-Client-Key': 'YOUR_CLIENT_KEY'
  }
});

const data = await response.json();
```

```bash cURL
curl -X GET "https://alerts-api.dial.to/v2/history?limit=25" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "X-Dialect-Client-Key: YOUR_CLIENT_KEY"
```
</CodeGroup>

**Query Parameters:**
- `appId` (optional): Filter notifications for a specific app
- `limit` (optional): Number of notifications to return (default: 25, max: 50)
- `cursor` (optional): Base64-encoded cursor for pagination

**Response:**
```json
{
  "notifications": [
    {
      "id": "notification-uuid",
      "title": "Trade Executed! ðŸ“ˆ",
      "body": "Your buy order for 10 SOL has been executed at $142.50",
      "image": "https://example.com/notification-image.png",
      "timestamp": "2024-01-15T10:30:00Z",
      "readAt": null,
      "app": {
        "id": "app-uuid",
        "name": "SolTrader",
        "image": "https://example.com/app-logo.png"
      },
      "actions": [
        {
          "type": "link",
          "label": "View Trade",
          "url": "https://soltrader.com/trades/123"
        }
      ],
      "data": {
        "tradeId": "123",
        "amount": "10",
        "price": "142.50"
      }
    }
  ],
  "hasMore": true,
  "nextCursor": "eyJpZCI6ImFsZXJ0XzEyMyIsInRpbWVzdGFtcCI6MTcwNTMwNzQwMH0="
}
```

### Pagination Example

```typescript
async function getAllNotifications() {
  const notifications = [];
  let cursor = null;
  let hasMore = true;

  while (hasMore) {
    const url = cursor
      ? `https://alerts-api.dial.to/v2/history?cursor=${cursor}&limit=50`
      : 'https://alerts-api.dial.to/v2/history?limit=50';

    const response = await fetch(url, {
      headers: {
        'Authorization': `Bearer ${jwtToken}`,
        'X-Dialect-Client-Key': 'YOUR_CLIENT_KEY'
      }
    });

    const data = await response.json();
    notifications.push(...data.notifications);

    hasMore = data.hasMore;
    cursor = data.nextCursor;
  }

  return notifications;
}
```

### Get Notification Summary

Get unread count and summary information without full notification data:

<CodeGroup>
```typescript TypeScript
const response = await fetch('https://alerts-api.dial.to/v2/history/summary', {
  headers: {
    'Authorization': `Bearer ${jwtToken}`,
    'X-Dialect-Client-Key': 'YOUR_CLIENT_KEY'
  }
});

const summary = await response.json();
```

```bash cURL
curl -X GET "https://alerts-api.dial.to/v2/history/summary" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "X-Dialect-Client-Key: YOUR_CLIENT_KEY"
```
</CodeGroup>

**Query Parameters:**
- `appId` (optional): Filter summary for a specific app

**Response:**
```json
{
  "unreadCount": 5,
  "lastUnreadNotification": {
    "id": "notification-uuid",
    "title": "Price Alert! ðŸš¨",
    "body": "SOL reached your target price of $150",
    "timestamp": "2024-01-15T14:20:00Z",
    "app": {
      "id": "app-uuid",
      "name": "PriceTracker"
    }
  }
}
```

### Mark Notifications as Read

Mark all notifications as read for the authenticated user:

<CodeGroup>
```typescript TypeScript
const response = await fetch('https://alerts-api.dial.to/v2/history/read', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${jwtToken}`,
    'X-Dialect-Client-Key': 'YOUR_CLIENT_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    appId: 'YOUR_APP_ID' // Optional: mark as read for specific app only
  })
});
```

```bash cURL
curl -X POST "https://alerts-api.dial.to/v2/history/read" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "X-Dialect-Client-Key: YOUR_CLIENT_KEY" \
  -H "Content-Type: application/json" \
  -d '{"appId": "YOUR_APP_ID"}'
```
</CodeGroup>

**Request Body:**
- `appId` (optional): If provided, only marks notifications from this app as read

**Response:**
```json
{}
```

### Clear Notification History

Clear all notifications for the authenticated user. This is a global action that applies across all clients:

<CodeGroup>
```typescript TypeScript
const response = await fetch('https://alerts-api.dial.to/v2/history/clear', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${jwtToken}`,
    'X-Dialect-Client-Key': 'YOUR_CLIENT_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    appId: 'YOUR_APP_ID' // Optional: clear notifications for specific app only
  })
});
```

```bash cURL
curl -X POST "https://alerts-api.dial.to/v2/history/clear" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "X-Dialect-Client-Key: YOUR_CLIENT_KEY" \
  -H "Content-Type: application/json" \
  -d '{"appId": "YOUR_APP_ID"}'
```
</CodeGroup>

**Request Body:**
- `appId` (optional): Single app ID, array of app IDs, or omitted to clear notifications from all apps

**Response:**
```json
{}
```


## Working with Blink Actions

Alerts can now include blinks, which works as a three-step process: 

1. [**Send the Alert:**](/alerts/send/api/send-messages) Send the alert with the supported protocol URL in the action.
2. **Enrich response data:** When [Dialect's mapping service](/alerts/blinks-in-alerts#mapping-service) detects a supported protocol URL in notification actions, it automatically enriches them with a `context` object containing `apiUrl`, `action` and a `type`.
3. **Fetch the URL:** After you've checked that there is a `context` object, you fetch this URL to get detailed data including the blink URL.

**Pro tip:** Check also for the `type` because it will tell you the structure of the data you'll receive and allows you to build the UI accordingly.

<Note>
In the following example, we'll use Jupiter Borrow to demonstrate this flow.
</Note>

### Detecting Blink-Enabled Notifications

In this scenario, there was a message sent and the mapping service has a supported protocol URL detected and enriched the response with the `context` object.

Once you've received a notification on the client side, it is important to check if it contains the `context` object in actions:

```typescript {13-17}
// ... other code to fetch notifications etc.

// Notification with blink context
const notification = {
  "id": "notification-uuid",
  "title": "Liquidation Warning",
  "body": "Your SOL/USDC position is at 78% LTV, approaching liquidation threshold of 80%.",
  "timestamp": "2024-01-15T10:30:00Z",
  "actions": [{
    "type": "link",
    "label": "Add Collateral",
    "url": "https://jup.ag/lend/borrow/1/nfts/2433",
    "context": {
      "type": "position",
      "apiUrl": "https://markets.dial.to/api/v0/positions/owners?walletAddresses=6JpNV6DK88auwzKVizdeT4Bw3D44sam5GqjcPCJ7y176&bundleIds=jupiter.borrow.1.2433",
      "action": "deposit"
    }
  }]
};

// Check if action has blink context
const hasBlink = notification.actions?.some(action => action.context);
```

The `context` object is only present when Dialect's mapping service detects a supported protocol URL.

### Fetching Position Data

After the `context` object is present, we can have to test the `type` to see what kind of data we'll receive. 

Since we've used Jupiter Borrow in this example, the `type` is `position` and we can use the `apiUrl` to fetch the position data.

<Tabs>
<Tab title="TypeScript">
```typescript
async function fetchPositionData(apiUrl: string) {
  const response = await fetch(apiUrl, {
    headers: {
      'x-dialect-api-key': 'YOUR_API_KEY'
    }
  });

  const data = await response.json();
  return data.positions; // Array of positions (deposit/borrow sides)
}

// Usage
const action = notification.actions[0];
const positions = await fetchPositionData(action.context.apiUrl);

// Find the deposit position
const depositPosition = positions.find(p => p.side === 'deposit');

// Access position data (more examples below)
console.log('LTV:', depositPosition.ltv);
console.log('Amount:', depositPosition.amount, depositPosition.market.token.symbol);
console.log('Liquidation Price:', depositPosition.liquidationPrice);

// Get blink URL for deposit action
const blinkUrl = depositPosition.actions.deposit.blinkUrl;
// blink:https://jupiter.dial.to/api/v0/lend/borrow/1/deposit?positionId=2433
```
</Tab>

<Tab title="cURL">
```bash
curl 'https://markets.dial.to/api/v0/positions/owners?walletAddresses=6JpNV6DK88auwzKVizdeT4Bw3D44sam5GqjcPCJ7y176&bundleIds=jupiter.borrow.1.2433' \
  --header 'x-dialect-api-key: YOUR_API_KEY'
```
</Tab>
</Tabs>

### Response Structure

The [Positions API](/api-reference/positions/list-all-market-positions-by-wallet-address) returns an array of positions. For a lending position like Jupiter Borrow, you'll receive both deposit and borrow sides as well as all relevant market data:

```json
{
  "positions": [
    {
      "id": "jupiter.borrow.1.2433.deposit",
      "type": "lending",
      "marketId": "jupiter.borrow.1",
      "ownerAddress": "6JpNV6DK88auwzKVizdeT4Bw3D44sam5GqjcPCJ7y176",
      "bundleId": "jupiter.borrow.1.2433",
      "side": "deposit",
      "additionalData": {
        "vaultId": 1,
        "nftId": 2433
      },
      "actions": {
        "deposit": {
          "blinkUrl": "blink:https://jupiter.dial.to/api/v0/lend/borrow/1/deposit?positionId=2433"
        },
        "withdraw": {
          "blinkUrl": "blink:https://jupiter.dial.to/api/v0/lend/borrow/1/2433/withdraw"
        }
      },
      "amount": 0.015060007,
      "amountUsd": 3.34,
      "ltv": 0.3033,
      "liquidationPrice": 84.00917409932147,
      "market": {
        "id": "jupiter.borrow.1",
        "type": "lending",
        "provider": {
          "id": "jupiter",
          "name": "Jupiter",
          "icon": "https://imagedelivery.net/C7jfNnfrjpAYWW6YevrFDg/5c23c065-89ef-413b-8deb-6d8c6a849300/public"
        },
        "token": {
          "address": "So11111111111111111111111111111111111111112",
          "symbol": "WSOL",
          "decimals": 9,
          "icon": "https://coin-images.coingecko.com/coins/images/21629/large/solana.jpg?1696520989"
        },
        "borrowToken": {
          "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
          "symbol": "USDC",
          "decimals": 6,
          "icon": "https://coin-images.coingecko.com/coins/images/6319/large/usdc.png?1696506694"
        },
        "websiteUrl": "https://jup.ag/lend/borrow/1",
        "depositApy": 0.0784,
        "baseDepositApy": 0.0484,
        "borrowApy": 0.0597,
        "baseBorrowApy": 0.0597,
        "totalDeposit": 665220.958436127,
        "totalDepositUsd": 147340132.39,
        "totalBorrow": 80014008.8212,
        "totalBorrowUsd": 79990184.41,
        "maxBorrow": 120021000.673021,
        "maxLtv": 0.75,
        "liquidationLtv": 0.8,
        "liquidationPenalty": 0.01,
        "additionalData": {},
        "actions": {
          "deposit": {
            "blinkUrl": "blink:https://jupiter.dial.to/api/v0/lend/borrow/1/deposit"
          }
        }
      }
    },
    {
      "id": "jupiter.borrow.1.2433.borrow",
      "type": "lending",
      "marketId": "jupiter.borrow.1",
      "ownerAddress": "6JpNV6DK88auwzKVizdeT4Bw3D44sam5GqjcPCJ7y176",
      "bundleId": "jupiter.borrow.1.2433",
      "side": "borrow",
      "additionalData": {
        "vaultId": 1,
        "nftId": 2433
      },
      "actions": {
        "borrow": {
          "blinkUrl": "blink:https://jupiter.dial.to/api/v0/lend/borrow/1/2433/borrow"
        },
        "repay": {
          "blinkUrl": "blink:https://jupiter.dial.to/api/v0/lend/borrow/1/2433/repay"
        }
      },
      "amount": 1.012143,
      "amountUsd": 1.01,
      "ltv": 0.3033,
      "liquidationPrice": 84.00917409932147,
      "market": {
        "id": "jupiter.borrow.1",
        "type": "lending",
        "provider": {
          "id": "jupiter",
          "name": "Jupiter",
          "icon": "https://imagedelivery.net/C7jfNnfrjpAYWW6YevrFDg/5c23c065-89ef-413b-8deb-6d8c6a849300/public"
        },
        "token": {
          "address": "So11111111111111111111111111111111111111112",
          "symbol": "WSOL",
          "decimals": 9,
          "icon": "https://coin-images.coingecko.com/coins/images/21629/large/solana.jpg?1696520989"
        },
        "borrowToken": {
          "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
          "symbol": "USDC",
          "decimals": 6,
          "icon": "https://coin-images.coingecko.com/coins/images/6319/large/usdc.png?1696506694"
        },
        "websiteUrl": "https://jup.ag/lend/borrow/1",
        "depositApy": 0.0784,
        "baseDepositApy": 0.0484,
        "borrowApy": 0.0597,
        "baseBorrowApy": 0.0597,
        "totalDeposit": 665220.958436127,
        "totalDepositUsd": 147340132.39,
        "totalBorrow": 80014008.8212,
        "totalBorrowUsd": 79990184.41,
        "maxBorrow": 120021000.673021,
        "maxLtv": 0.75,
        "liquidationLtv": 0.8,
        "liquidationPenalty": 0.01,
        "additionalData": {},
        "actions": {
          "deposit": {
            "blinkUrl": "blink:https://jupiter.dial.to/api/v0/lend/borrow/1/deposit"
          }
        }
      }
    }
  ]
}
```

### Using the Data

The Markets API response provides everything you need to build rich, position-aware UIs:

**Position Context Card:**
- Protocol info: `market.provider.name`, `market.provider.icon`, `market.provider.id`
- Token details: `market.token.symbol`, `market.token.address`, `market.borrowToken.symbol`, `market.borrowToken.address`, token icons
- Position health: `ltv`, `liquidationPrice`
- Amounts: `amount`, `amountUsd`
- Position identifiers: `id`, `bundleId`, `marketId`, `ownerAddress`

**Action Button:**
- Blink URL for transactions: `actions.deposit.blinkUrl`, `actions.withdraw.blinkUrl`
- Protocol website link: `market.websiteUrl`

**Additional Context:**
- Current APY: `market.depositApy`, `market.baseDepositApy`, `market.borrowApy`, `market.baseBorrowApy`
- Liquidation info: `market.liquidationLtv`, `market.liquidationPenalty`
- Market limits: `market.maxLtv`, `market.maxBorrow`
- Market totals: `market.totalDeposit`, `market.totalDepositUsd`, `market.totalBorrow`, `market.totalBorrowUsd`
- Token decimals for formatting: `market.token.decimals`, `market.borrowToken.decimals`

### Example Implementation

Here's a complete example of handling blink-enabled notifications:

```typescript
async function handleNotification(notification: Notification) {
  const action = notification.actions?.[0];

  // Check if this is a blink-enabled notification
  if (!action?.context) {
    // Handle as regular notification
    return renderStandardNotification(notification);
  }

  // Fetch position data
  const response = await fetch(action.context.apiUrl, {
    headers: { 'x-dialect-api-key': 'YOUR_API_KEY' }
  });
  const { positions } = await response.json();

  // Find the deposit position based on context action
  const depositPosition = positions.find(p => p.side === 'deposit');

  // Render blink UI
  return renderBlinkUI({
    notification,
    position: depositPosition,
    blinkUrl: depositPosition.actions.deposit.blinkUrl,
    websiteUrl: action.url,
    onDeposit: async (amount: number) => {
      // Call blink URL to get transaction
      const txResponse = await fetch(
        depositPosition.actions.deposit.blinkUrl.replace('blink:', ''),
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            account: userWalletAddress,
            amount: amount
          })
        }
      );
      const { transaction } = await txResponse.json();

      // Sign and send transaction
      await signAndSendTransaction(transaction);
    }
  });
}
```

<Note>
For complete implementation details, including UI patterns and best practices, see the [Blinks in Alerts Guide](/alerts/blinks-in-alerts).
</Note>

## Next Steps

With notification management in place, you can:

1. **[Setup Push Notifications](/alerts/integrate-inbox/api/push-notifications)** - Enable mobile push notifications for your inbox
2. **[Explore User Management](/alerts/integrate-inbox/user-management)** - Manage user subscriptions and preferences